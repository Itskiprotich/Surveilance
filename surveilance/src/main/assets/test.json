{
  "resourceType": "Questionnaire",
  "meta": {
    "profile": [
      "http://hl7.org/fhir/4.0/StructureDefinition/Questionnaire"
    ]
  },
  "title": "MOH 502",
  "status": "draft",
  "extension": [
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "countyName",
        "language": "text/fhirpath",
        "expression": "%resource.descendants().where(linkId='a4-county').answer.value.reference"
      }
    }
  ],
  "item": [
    {
      "extension": [
        {
          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-answerExpression",
          "valueExpression": {
            "language": "application/x-fhir-query",
            "expression": "Location?partof=Location/0&_sort=name"
          }
        },
        {
          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-choiceColumn",
          "extension": [
            {
              "url": "path",
              "valueString": "name"
            },
            {
              "url": "forDisplay",
              "valueBoolean": true
            }
          ]
        }
      ],
      "linkId": "a4-county",
      "text": "County",
      "type": "reference",
      "required": true
    },
    {
      "extension": [
        {
          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-answerExpression",
          "valueExpression": {
            "language": "application/x-fhir-query",
            "expression": "Location?partof={{%countyName}}"
          }
        },
        {
          "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-choiceColumn",
          "extension": [
            {
              "url": "path",
              "valueString": "name"
            },
            {
              "url": "forDisplay",
              "valueBoolean": true
            }
          ]
        }
      ],
      "linkId": "a3-sub-county",
      "text": "Sub County",
      "type": "reference",
      "_text": {
        "extension": [
          {
            "url": "http://hl7.org/fhir/StructureDefinition/cqf-expression",
            "valueExpression": {
              "language": "text/fhirpath",
              "expression": "'Select '+ %resource.descendants().where(linkId = 'a4-county').answer.value.reference + ' Sub County'"
            }
          }
        ]
      },
      "required": true
    }
  ]
}