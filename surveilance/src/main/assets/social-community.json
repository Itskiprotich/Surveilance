{
  "resourceType": "Questionnaire",
  "id": "rcce-social-investigation-part-b",
  "meta": {
    "profile": [
      "http://hl7.org/fhir/4.0/StructureDefinition/Questionnaire"
    ]
  },
  "extension": [
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "countyName",
        "language": "text/fhirpath",
        "expression": "%resource.descendants().where(linkId='294367770999').answer.value.reference"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "patientCountyName",
        "language": "text/fhirpath",
        "expression": "%resource.descendants().where(linkId='a4-county').answer.value.reference"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "selectedSubCountyName",
        "language": "text/fhirpath",
        "expression": "%resource.descendants().where(linkId='819946803642').answer.value.reference"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "selectedWardName",
        "language": "text/fhirpath",
        "expression": "%resource.descendants().where(linkId='819943434').answer.value.reference"
      }
    },
    {
      "url": "http://hl7.org/fhir/StructureDefinition/variable",
      "valueExpression": {
        "name": "selectedFacilityName",
        "language": "text/fhirpath",
        "expression": "%resource.descendants().where(linkId='819943434').answer.value.reference"
      }
    }
  ],
  "title": "RCCE Social Investigation Form - Part B: Community Questionnaire",
  "status": "active",
  "subjectType": [
    "Patient"
  ],
  "item": [
    {
      "item": [
        {
          "linkId": "294367770999",
          "text": "County ",
          "type": "reference",
          "required": true,
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-answerExpression",
              "valueExpression": {
                "language": "application/x-fhir-query",
                "expression": "Location?partof=Location/0&_sort=name"
              }
            },
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-choiceColumn",
              "extension": [
                {
                  "url": "path",
                  "valueString": "name"
                },
                {
                  "url": "forDisplay",
                  "valueBoolean": true
                }
              ]
            }
          ]
        },
        {
          "type": "reference",
          "linkId": "819946803642",
          "text": "Subcounty ",
          "required": true,
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-answerExpression",
              "valueExpression": {
                "language": "application/x-fhir-query",
                "expression": "Location?partof={{%countyName}}&_sort=name"
              }
            },
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-choiceColumn",
              "extension": [
                {
                  "url": "path",
                  "valueString": "name"
                },
                {
                  "url": "forDisplay",
                  "valueBoolean": true
                }
              ]
            }
          ]
        },
        {
          "type": "reference",
          "linkId": "819943434",
          "text": "Ward ",
          "required": true,
          "extension": [
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-answerExpression",
              "valueExpression": {
                "language": "application/x-fhir-query",
                "expression": "Location?partof={{%selectedSubCountyName}}&_sort=name"
              }
            },
            {
              "url": "http://hl7.org/fhir/uv/sdc/StructureDefinition/sdc-questionnaire-choiceColumn",
              "extension": [
                {
                  "url": "path",
                  "valueString": "name"
                },
                {
                  "url": "forDisplay",
                  "valueBoolean": true
                }
              ]
            }
          ]
        }
      ],
      "type": "group",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page"
              }
            ]
          }
        }
      ],
      "linkId": "151479012557",
      "text": "Reporting Site"
    },
    {
      "linkId": "socio-demographics",
      "text": "Socio demographics information",
      "type": "group",
      "item": [
        {
          "linkId": "county",
          "text": "County",
          "type": "string"
        },
        {
          "linkId": "sub-county",
          "text": "Sub County",
          "type": "string"
        },
        {
          "linkId": "ward",
          "text": "Ward",
          "type": "string"
        },
        {
          "linkId": "village",
          "text": "Village",
          "type": "string"
        },
        {
          "linkId": "geocodes",
          "text": "Geocodes",
          "type": "string"
        }
      ],
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page"
              }
            ]
          }
        }
      ]
    },
    {
      "linkId": "respondent-info",
      "text": "Respondent Information",
      "type": "group",
      "item": [
        {
          "type": "choice",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "radio-button",
                    "display": "Radio Button"
                  }
                ]
              }
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-choiceOrientation",
              "valueCode": "horizontal"
            }
          ],
          "linkId": "929966324957",
          "text": "Sex",
          "required": true,
          "answerOption": [
            {
              "valueCoding": {
                "code": "male",
                "display": "Male"
              }
            },
            {
              "valueCoding": {
                "code": "female",
                "display": "Female"
              }
            }
          ]
        },
        {
          "linkId": "age",
          "text": "Age (yrs/mths)",
          "type": "integer"
        },
        {
          "type": "choice",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "radio-button",
                    "display": "Radio Button"
                  }
                ]
              }
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-choiceOrientation",
              "valueCode": "horizontal"
            }
          ],
          "linkId": "education",
          "text": "Level of education",
          "answerOption": [
            {
              "valueCoding": {
                "code": "none",
                "display": "None"
              }
            },
            {
              "valueCoding": {
                "code": "primary",
                "display": "Primary"
              }
            },
            {
              "valueCoding": {
                "code": "secondary",
                "display": "Secondary"
              }
            },
            {
              "valueCoding": {
                "code": "tertiary",
                "display": "Tertiary"
              }
            }
          ]
        },
        {
          "linkId": "occupation",
          "text": "Occupation",
          "type": "string"
        },
        {
          "linkId": "religion",
          "text": "Religion of respondent",
          "type": "choice",
          "answerOption": [
            {
              "valueCoding": {
                "code": "christian",
                "display": "Christian"
              }
            },
            {
              "valueCoding": {
                "code": "muslim",
                "display": "Muslim"
              }
            },
            {
              "valueCoding": {
                "code": "hindu",
                "display": "Hindu"
              }
            },
            {
              "valueCoding": {
                "code": "atheist",
                "display": "Atheist"
              }
            },
            {
              "valueCoding": {
                "code": "other",
                "display": "Others (specify)"
              }
            }
          ]
        },
        {
          "linkId": "religion-specify",
          "text": "Specify other religion",
          "type": "string",
          "enableWhen": [
            {
              "question": "religion",
              "operator": "=",
              "answerCoding": {
                "code": "other"
              }
            }
          ]
        },
        {
          "linkId": "household-size",
          "text": "How many people live in this household?",
          "type": "integer"
        }
      ],
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page"
              }
            ]
          }
        }
      ]
    },
    {
      "linkId": "knowledge-awareness",
      "text": "Knowledge and Awareness on current disease outbreak in this community",
      "type": "group",
      "item": [
        {
          "linkId": "heard-outbreak",
          "text": "Have you heard of the current disease outbreak in this area?",
          "type": "choice",
          "required": true,
          "answerOption": [
            {
              "valueCoding": {
                "code": "yes",
                "display": "Yes"
              }
            },
            {
              "valueCoding": {
                "code": "no",
                "display": "No"
              }
            }
          ],
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "radio-button",
                    "display": "Radio Button"
                  }
                ]
              }
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-choiceOrientation",
              "valueCode": "horizontal"
            }
          ]
        },
        {
          "type": "choice",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "drop-down",
                    "display": "Drop down"
                  }
                ]
              }
            }
          ],
          "linkId": "which-disease",
          "text": "Which disease is it?",
          "enableWhen": [
            {
              "question": "heard-outbreak",
              "operator": "=",
              "answerCoding": {
                "code": "yes",
                "display": "Yes"
              }
            }
          ],
          "repeats": true,
          "answerOption": [
            {
              "valueCoding": {
                "code": "ajd",
                "display": "Acute Jaundice"
              }
            },
            {
              "valueCoding": {
                "code": "chikungunya",
                "display": "Chikungunya Disease"
              }
            },
            {
              "valueCoding": {
                "code": "dengue",
                "display": "Dengue Fever Disease"
              }
            },
            {
              "valueCoding": {
                "code": "yellow-fever",
                "display": "Yellow Fever"
              }
            },
            {
              "valueCoding": {
                "code": "covid19",
                "display": "COVID-19"
              }
            },
            {
              "valueCoding": {
                "code": "diarrhoea",
                "display": "Diarrhoea Diseases"
              }
            },
            {
              "valueCoding": {
                "code": "sars",
                "display": "Severe Acute Respiratory Syndrome (SARS)"
              }
            },
            {
              "valueCoding": {
                "code": "sari",
                "display": "Severe Acute Respiratory Illness (SARI)"
              }
            },
            {
              "valueCoding": {
                "code": "nnt",
                "display": "Neonatal Tetanus (NNT)"
              }
            },
            {
              "valueCoding": {
                "code": "ahfs",
                "display": "Acute Haemorrhagic Fever Syndrome"
              }
            },
            {
              "valueCoding": {
                "code": "typhoid",
                "display": "Typhoid Fever"
              }
            },
            {
              "valueCoding": {
                "code": "polio",
                "display": "Polio (Poliomyelitis)"
              }
            },
            {
              "valueCoding": {
                "code": "cholera",
                "display": "Cholera"
              }
            },
            {
              "valueCoding": {
                "code": "maternal-death",
                "display": "Maternal Death"
              }
            },
            {
              "valueCoding": {
                "code": "meningitis",
                "display": "Meningitis"
              }
            },
            {
              "valueCoding": {
                "code": "hepatitis",
                "display": "Hepatitis"
              }
            },
            {
              "valueCoding": {
                "code": "dysentery",
                "display": "Dysentery Disease"
              }
            },
            {
              "valueCoding": {
                "code": "avian-flu",
                "display": "Avian Influenza (Bird Flu)"
              }
            },
            {
              "valueCoding": {
                "code": "anthrax",
                "display": "Anthrax"
              }
            },
            {
              "valueCoding": {
                "code": "rabies",
                "display": "Rabies"
              }
            },
            {
              "valueCoding": {
                "code": "rvf",
                "display": "Rift Valley Fever"
              }
            },
            {
              "valueCoding": {
                "code": "brucellosis",
                "display": "Brucellosis"
              }
            },
            {
              "valueCoding": {
                "code": "leishmaniasis",
                "display": "Leishmaniasis"
              }
            },
            {
              "valueCoding": {
                "code": "malaria",
                "display": "Malaria"
              }
            },
            {
              "valueCoding": {
                "code": "measles",
                "display": "Measles"
              }
            }
          ]
        },
        {
          "type": "choice",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "radio-button",
                    "display": "Radio Button"
                  }
                ]
              }
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-choiceOrientation",
              "valueCode": "horizontal"
            }
          ],
          "linkId": "explain-disease",
          "text": "Would you explain what this disease is?",
          "enableWhen": [
            {
              "question": "heard-outbreak",
              "operator": "=",
              "answerCoding": {
                "code": "yes",
                "display": "Yes"
              }
            }
          ],
          "required": true,
          "answerOption": [
            {
              "valueCoding": {
                "code": "yes",
                "display": "Yes"
              }
            },
            {
              "valueCoding": {
                "code": "no",
                "display": "No"
              }
            }
          ]
        },
        {
          "type": "string",
          "linkId": "explanation",
          "text": "If yes, what is it?",
          "enableWhen": [
            {
              "question": "explain-disease",
              "operator": "=",
              "answerCoding": {
                "code": "yes",
                "display": "Yes"
              }
            }
          ]
        },
        {
          "type": "choice",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "radio-button",
                    "display": "Radio Button"
                  }
                ]
              }
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-choiceOrientation",
              "valueCode": "horizontal"
            }
          ],
          "linkId": "know-risk-group",
          "text": "Do you know who is at risk of this disease?",
          "enableWhen": [
            {
              "question": "heard-outbreak",
              "operator": "=",
              "answerCoding": {
                "code": "yes",
                "display": "Yes"
              }
            }
          ],
          "required": true,
          "answerOption": [
            {
              "valueCoding": {
                "code": "yes",
                "display": "Yes"
              }
            },
            {
              "valueCoding": {
                "code": "no",
                "display": "No"
              }
            }
          ]
        },
        {
          "type": "string",
          "linkId": "signs-symptoms",
          "text": "What are some of the signs and symptoms of this disease?",
          "enableWhen": [
            {
              "question": "heard-outbreak",
              "operator": "=",
              "answerCoding": {
                "code": "yes",
                "display": "Yes"
              }
            }
          ]
        },
        {
          "type": "string",
          "linkId": "transmission",
          "text": "How do you think this disease is transmitted? (Check all that apply)",
          "enableWhen": [
            {
              "question": "heard-outbreak",
              "operator": "=",
              "answerCoding": {
                "code": "yes",
                "display": "Yes"
              }
            }
          ]
        },
        {
          "type": "choice",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "radio-button",
                    "display": "Radio Button"
                  }
                ]
              }
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-choiceOrientation",
              "valueCode": "horizontal"
            }
          ],
          "linkId": "can-prevent",
          "text": "Do you think this disease can be prevented?",
          "enableWhen": [
            {
              "question": "heard-outbreak",
              "operator": "=",
              "answerCoding": {
                "code": "yes",
                "display": "Yes"
              }
            }
          ],
          "required": true,
          "answerOption": [
            {
              "valueCoding": {
                "code": "yes",
                "display": "Yes"
              }
            },
            {
              "valueCoding": {
                "code": "no",
                "display": "No"
              }
            }
          ]
        },
        {
          "type": "string",
          "linkId": "preventive-measures",
          "text": "Preventive Measures if Yes",
          "enableWhen": [
            {
              "question": "can-prevent",
              "operator": "=",
              "answerCoding": {
                "code": "yes",
                "display": "Yes"
              }
            }
          ]
        },
        {
          "type": "string",
          "linkId": "why-not-prevent",
          "text": "If No, Why?",
          "enableWhen": [
            {
              "question": "can-prevent",
              "operator": "=",
              "answerCoding": {
                "code": "no",
                "display": "No"
              }
            }
          ]
        },
        {
          "type": "choice",
          "extension": [
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
              "valueCodeableConcept": {
                "coding": [
                  {
                    "system": "http://hl7.org/fhir/questionnaire-item-control",
                    "code": "radio-button",
                    "display": "Radio Button"
                  }
                ]
              }
            },
            {
              "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-choiceOrientation",
              "valueCode": "horizontal"
            }
          ],
          "linkId": "household-infected",
          "text": "Have you or any member of this household been infected by the current disease?",
          "enableWhen": [
            {
              "question": "heard-outbreak",
              "operator": "=",
              "answerCoding": {
                "code": "yes",
                "display": "Yes"
              }
            }
          ],
          "required": true,
          "answerOption": [
            {
              "valueCoding": {
                "code": "yes",
                "display": "Yes"
              }
            },
            {
              "valueCoding": {
                "code": "no",
                "display": "No"
              }
            }
          ]
        },
        {
          "type": "integer",
          "linkId": "number-infected",
          "text": "If yes, how many were infected in your household",
          "enableWhen": [
            {
              "question": "household-infected",
              "operator": "=",
              "answerCoding": {
                "code": "yes",
                "display": "Yes"
              }
            }
          ]
        }
      ],
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "page",
                "display": "Page"
              }
            ]
          }
        }
      ]
    }
  ]
}