{
  "resourceType": "Questionnaire",
  "meta": {
    "profile": [
      "http://hl7.org/fhir/4.0/StructureDefinition/Questionnaire"
    ]
  },
  "title": "Regional Lab Information",
  "status": "active",
  "item": [
    {
      "type": "choice",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "drop-down",
                "display": "Drop down"
              }
            ]
          }
        }
      ],
      "linkId": "measles-igm-result",
      "text": "Measles IgM results by Regional Lab",
      "required": true,
      "answerOption": [
        {
          "valueCoding": {
            "code": "Positive",
            "display": "Positive"
          }
        },
        {
          "valueCoding": {
            "code": "Negative",
            "display": "Negative"
          }
        },
        {
          "valueCoding": {
            "code": "Indeterminate",
            "display": "Indeterminate"
          }
        },
        {
          "valueCoding": {
            "code": "Not Done",
            "display": "Not Done"
          }
        },
        {
          "valueCoding": {
            "code": "Pending",
            "display": "Pending"
          }
        },
        {
          "valueCoding": {
            "code": "Unknown",
            "display": "Unknown"
          }
        }
      ]
    },
    {
      "type": "date",
      "linkId": "date-measles-igm-sent",
      "text": "Date measles IgM results sent by Regional lab",
      "required": true,
      "extension": [
        {
          "url": "http://ehelse.no/fhir/StructureDefinition/validationtext",
          "valueString": "Cannot be a date in the future"
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/maxValue",
          "valueDate": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/cqf-calculatedValue",
                "valueExpression": {
                  "language": "text/fhirpath",
                  "expression": "today()"
                }
              }
            ]
          }
        }
      ]
    },
    {
      "type": "choice",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "drop-down",
                "display": "Drop down"
              }
            ]
          }
        }
      ],
      "linkId": "rubella-igm-result",
      "text": "Rubella IgM results by Regional Lab",
      "enableWhen": [
        {
          "question": "measles-igm-result",
          "operator": "=",
          "answerCoding": {
            "code": "Negative",
            "display": "Negative"
          }
        }
      ],
      "required": true,
      "answerOption": [
        {
          "valueCoding": {
            "code": "Positive",
            "display": "Positive"
          }
        },
        {
          "valueCoding": {
            "code": "Negative",
            "display": "Negative"
          }
        },
        {
          "valueCoding": {
            "code": "Indeterminate",
            "display": "Indeterminate"
          }
        },
        {
          "valueCoding": {
            "code": "Not Done",
            "display": "Not Done"
          }
        },
        {
          "valueCoding": {
            "code": "Pending",
            "display": "Pending"
          }
        },
        {
          "valueCoding": {
            "code": "Unknown",
            "display": "Unknown"
          }
        }
      ]
    },
    {
      "type": "date",
      "linkId": "date-rubella-igm-sent",
      "text": "Date Rubella IgM results sent by Regional lab",
      "extension": [
        {
          "url": "http://ehelse.no/fhir/StructureDefinition/validationtext",
          "valueString": "Cannot be a date in the future"
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/maxValue",
          "valueDate": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/cqf-calculatedValue",
                "valueExpression": {
                  "language": "text/fhirpath",
                  "expression": "today()"
                }
              }
            ]
          }
        }
      ],
      "enableWhen": [
        {
          "question": "measles-igm-result",
          "operator": "=",
          "answerCoding": {
            "code": "Negative",
            "display": "Negative"
          }
        }
      ],
      "required": true
    },
    {
      "type": "date",
      "linkId": "date-specimen-sent",
      "text": "Date specimen sent to regional for virus isolation",
      "required": true,
      "extension": [
        {
          "url": "http://ehelse.no/fhir/StructureDefinition/validationtext",
          "valueString": "Cannot be a date in the future"
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/maxValue",
          "valueDate": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/cqf-calculatedValue",
                "valueExpression": {
                  "language": "text/fhirpath",
                  "expression": "today()"
                }
              }
            ]
          }
        }
      ]
    },
    {
      "type": "choice",
      "extension": [
        {
          "url": "http://hl7.org/fhir/StructureDefinition/questionnaire-itemControl",
          "valueCodeableConcept": {
            "coding": [
              {
                "system": "http://hl7.org/fhir/questionnaire-item-control",
                "code": "drop-down",
                "display": "Drop down"
              }
            ]
          }
        }
      ],
      "linkId": "virus-isolation",
      "text": "Virus Isolation",
      "required": true,
      "answerOption": [
        {
          "valueCoding": {
            "code": "Positive",
            "display": "Positive"
          }
        },
        {
          "valueCoding": {
            "code": "Negative",
            "display": "Negative"
          }
        },
        {
          "valueCoding": {
            "code": "Indeterminate",
            "display": "Indeterminate"
          }
        },
        {
          "valueCoding": {
            "code": "Not Done",
            "display": "Not Done"
          }
        },
        {
          "valueCoding": {
            "code": "Pending",
            "display": "Pending"
          }
        },
        {
          "valueCoding": {
            "code": "Unknown",
            "display": "Unknown"
          }
        }
      ]
    },
    {
      "type": "date",
      "linkId": "isolation-results-sent",
      "text": "Date Isolation results sent by regional lab",
      "required": true,
      "extension": [
        {
          "url": "http://ehelse.no/fhir/StructureDefinition/validationtext",
          "valueString": "Cannot be a date in the future"
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/maxValue",
          "valueDate": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/cqf-calculatedValue",
                "valueExpression": {
                  "language": "text/fhirpath",
                  "expression": "today()"
                }
              }
            ]
          }
        }
      ]
    },
    {
      "type": "date",
      "linkId": "isolation-sent-epi",
      "text": "Date Isolation sent to EPI/Surveillance Unit",
      "required": true,
      "extension": [
        {
          "url": "http://ehelse.no/fhir/StructureDefinition/validationtext",
          "valueString": "Cannot be a date in the future"
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/maxValue",
          "valueDate": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/cqf-calculatedValue",
                "valueExpression": {
                  "language": "text/fhirpath",
                  "expression": "today()"
                }
              }
            ]
          }
        }
      ]
    },
    {
      "type": "date",
      "linkId": "igm-results-received",
      "text": "Date IgM Results received at National Lab",
      "required": true,
      "extension": [
        {
          "url": "http://ehelse.no/fhir/StructureDefinition/validationtext",
          "valueString": "Cannot be a date in the future"
        },
        {
          "url": "http://hl7.org/fhir/StructureDefinition/maxValue",
          "valueDate": {
            "extension": [
              {
                "url": "http://hl7.org/fhir/StructureDefinition/cqf-calculatedValue",
                "valueExpression": {
                  "language": "text/fhirpath",
                  "expression": "today()"
                }
              }
            ]
          }
        }
      ]
    }
  ]
}